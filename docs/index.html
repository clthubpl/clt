<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>CLT HUB – Powitalny</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background: #218838; color: #1f3d2c; margin: 0; padding: 30px 0;}
    .main-title { text-align: center; font-size: 2.1em; color: #fff; margin-top: 0; margin-bottom: 26px; font-weight: bold; letter-spacing: 0.05em; }
    #lang-select-container { position: absolute; top: 18px; right: 32px; z-index: 100; }
    #lang-select { font-size: 1.08em; padding: 3px 16px; border-radius: 7px; background: #fff; color: #1f3d2c; border: none; font-weight: 600; }
    .main-wrap { display: flex; justify-content: center; align-items: flex-start; gap: 1cm; max-width: 900px; margin: 0 auto; }
    .panel { background: #fff; border-radius: 12px; box-shadow: 0 4px 12px #1f3d2c20; padding: 24px 24px; flex: 1 1 0; min-width: 270px; max-width: 350px; margin: 0; }
    .panel.left-panel { text-align: center; display: flex; flex-direction: column; align-items: center;}
    .logo { width: 90px; margin-bottom: 12px; }
    .headline { font-size: 1.2em; margin-bottom: 18px; color: #1f3d2c; }
    .contact { font-size: 1em; margin-top: 34px; color: #1f3d2c;}
    .entry-btn { margin-top: 18px; padding: 10px 40px; font-size: 1.07em; background: #2b6542; color: #fff; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; letter-spacing: 0.04em; transition: background 0.15s;}
    .entry-btn:hover { background: #184123;}
    .admin-login { margin-top: 18px; display: flex; flex-direction: column; align-items: center;}
    .admin-login input { padding: 8px; border-radius: 6px; border: 1px solid #ccc; margin-bottom: 6px; font-size: 1em; width: 160px;}
    .admin-login button { padding: 7px 18px; border-radius: 6px; border: none; background: #218838; color: #fff; font-weight: 600; cursor: pointer;}
    .admin-info { color: #218838; margin-top: 8px; font-size: 0.95em; font-weight: 600;}
    .panel.right-panel { background: #14281d; color: #fff; font-size: 1em; min-width: 250px; max-width: 350px; word-break: break-word;}
    ul.toc { padding: 0; margin: 0; list-style-type: disc; padding-left: 18px;}
    ul.toc > li { margin-bottom: 10px; font-size: 1.05em; font-weight: 700; letter-spacing: 0.01em;}
    ul.toc ul { margin-top: 4px; margin-bottom: 6px; margin-left: 14px; font-size: 0.97em;}
    ul.toc li ul li { font-weight: 400; font-size: 0.96em; margin-bottom: 4px; margin-top: 4px;}
    ul.toc a { color: #c2ffd5; text-decoration: underline; transition: color 0.15s;}
    ul.toc a:hover { color: #b8f570;}
    @media (max-width: 900px) { .main-wrap { flex-direction: column; gap: 18px; max-width: 99vw; } .panel { max-width: 100%; min-width: unset; } }
    .regulamin { max-width: 900px; margin: 36px auto 0 auto; font-size: 0.97em; background: #fff; border-radius: 10px; box-shadow: 0 2px 10px #1f3d2c18; padding: 18px 26px 18px 26px; color: #233729; line-height: 1.55;}
    .regulamin strong { font-weight: 700; }
  </style>
</head>
<body>
  <div id="lang-select-container">
    <select id="lang-select" aria-label="Wybierz język">
      <option value="pl">PL</option>
      <option value="en">ENG</option>
      <option value="de">GER</option>
    </select>
  </div>
  <div class="main-title" id="main-title">CLT HUB</div>
  <div class="main-wrap">
    <section class="panel left-panel">
      <img src="logo.png" alt="Logo CLT HUB" class="logo"/>
      <div class="headline" id="headline">CLT level up!</div>
      <form class="admin-login" id="adminLogin" autocomplete="off">
        <input type="text" id="adminName" placeholder="Login admina">
        <button type="submit" id="loginBtn">Zaloguj admina</button>
        <div id="adminInfo" class="admin-info" style="display:none">Jesteś zalogowany jako admin.</div>
      </form>
      <button id="entryBtn" class="entry-btn">Wejdź</button>
      <div class="contact" id="contactInfo">Kontakt z autorem cltplhub@gmail.com</div>
    </section>
    <section class="panel right-panel">
      <ul class="toc" id="toc"></ul>
    </section>
  </div>
  <div class="regulamin" id="regulamin">
    <strong>Regulamin / Informacje prawne:</strong><br>
    Strona CLT HUB stanowi zbiór informacji oraz bazę wiedzy na temat technologii CLT. Niektóre jej elementy, takie jak kalkulatory inżynieryjne, umożliwiają symulacje i modelowanie, jednak nie zastępują profesjonalnej obsługi ze strony uprawnionego konstruktora lub innych specjalistów branżowych. Autor nie ponosi odpowiedzialności za ewentualne szkody powstałe w wyniku wdrożeń opartych na analizach i symulacjach narzędzi dostępnych w CLT HUB. Lista dostępnych opracowań będzie sukcesywnie rozszerzana (można zgłaszać własne propozycje do wdrożeń).<br>
    © Wszelkie prawa zastrzeżone (All rights reserved).
  </div>
  <script>
    // Tłumaczenia statycznych elementów interfejsu
    const translations = {
      pl: {
        mainTitle: "CLT HUB",
        headline: "CLT level up!",
        adminPlaceholder: "Login admina",
        loginBtn: "Zaloguj admina",
        adminInfo: "Jesteś zalogowany jako admin.",
        entryBtn: "Wejdź",
        contact: "Kontakt z autorem cltplhub@gmail.com",
        regulamin: `<strong>Regulamin / Informacje prawne:</strong><br>
          Strona CLT HUB stanowi zbiór informacji oraz bazę wiedzy na temat technologii CLT. Niektóre jej elementy, takie jak kalkulatory inżynieryjne, umożliwiają symulacje i modelowanie, jednak nie zastępują profesjonalnej obsługi ze strony uprawnionego konstruktora lub innych specjalistów branżowych. Autor nie ponosi odpowiedzialności za ewentualne szkody powstałe w wyniku wdrożeń opartych na analizach i symulacjach narzędzi dostępnych w CLT HUB. Lista dostępnych opracowań będzie sukcesywnie rozszerzana (można zgłaszać własne propozycje do wdrożeń).<br>
          © Wszelkie prawa zastrzeżone (All rights reserved).`
      },
      en: {
        mainTitle: "CLT HUB",
        headline: "CLT level up!",
        adminPlaceholder: "Admin login",
        loginBtn: "Log in as admin",
        adminInfo: "You are logged in as admin.",
        entryBtn: "Enter",
        contact: "Contact: cltplhub@gmail.com",
        regulamin: `<strong>Terms & Legal Notice:</strong><br>
          The CLT HUB website is an information base about CLT technology. Some elements, such as engineering calculators, allow simulation and modeling, but do not replace professional support from a licensed structural engineer or other specialists. The author is not responsible for any damages resulting from implementations based on analyses and simulations of the CLT HUB tools. The list of available studies will be successively expanded (you can also submit your own proposals for future implementations).<br>
          © All rights reserved.`
      },
      de: {
        mainTitle: "CLT HUB",
        headline: "CLT level up!",
        adminPlaceholder: "Admin-Login",
        loginBtn: "Als Admin anmelden",
        adminInfo: "Sie sind als Admin angemeldet.",
        entryBtn: "Eintritt",
        contact: "Kontakt: cltplhub@gmail.com",
        regulamin: `<strong>Regeln / Rechtliche Hinweise:</strong><br>
          Die Seite CLT HUB ist eine Informations- und Wissensdatenbank zur CLT-Technologie. Einige Elemente, wie die Ingenieurrechner, ermöglichen Simulationen und Modellierungen, ersetzen jedoch nicht die professionelle Betreuung durch einen berechtigten Konstrukteur oder andere Fachleute. Der Autor übernimmt keine Haftung für Schäden, die aus der Umsetzung von Analysen und Simulationen der CLT HUB-Tools entstehen. Die Liste der verfügbaren Studien wird schrittweise erweitert (eigene Vorschläge können eingereicht werden).<br>
          © Alle Rechte vorbehalten.`
      }
    };

    // Zmiana języka UI i TOC
    function setLanguage(lang) {
      document.getElementById('main-title').textContent = translations[lang].mainTitle;
      document.getElementById('headline').textContent = translations[lang].headline;
      document.getElementById('adminName').placeholder = translations[lang].adminPlaceholder;
      document.getElementById('loginBtn').textContent = translations[lang].loginBtn;
      document.getElementById('adminInfo').textContent = translations[lang].adminInfo;
      document.getElementById('entryBtn').textContent = translations[lang].entryBtn;
      document.getElementById('contactInfo').textContent = translations[lang].contact;
      document.getElementById('regulamin').innerHTML = translations[lang].regulamin;
      renderTOC(lang, tocCache);
    }

    // Logowanie admina
    document.getElementById('adminLogin').onsubmit = function(e) {
      e.preventDefault();
      const val = document.getElementById('adminName').value.trim();
      if(val === 'admin') {
        localStorage.setItem('clthub_login', 'admin');
        document.getElementById('adminInfo').style.display = 'block';
      }
    }
    if(localStorage.getItem('clthub_login') === 'admin') {
      document.getElementById('adminInfo').style.display = 'block';
    }

    // Wejdź: raz bez hotpay, kolejne wejście hotpay, admin zawsze wchodzi
    document.getElementById('entryBtn').onclick = function() {
      const admin = localStorage.getItem("clthub_login") === "admin";
      const wasEntered = localStorage.getItem("clthub_entry") === "true";
      const cltUrl = "HUBCLT.html?free=1&lang=" + document.getElementById('lang-select').value;
      const hotpayUrl = "https://hotpay.pl/payment/link-przykladowy"; // <-- Podmień na swój!
      if (admin) {
        window.location.href = cltUrl;
        return;
      }
      if (!wasEntered) {
        localStorage.setItem("clthub_entry", "true");
        window.location.href = cltUrl;
      } else {
        window.location.href = hotpayUrl;
      }
    };

    // Spis treści z toc.json (wielojęzycznie)
    let tocCache = [];
    function renderTOC(lang, toc) {
      const tocRoot = document.getElementById('toc');
      tocRoot.innerHTML = "";
      toc.forEach(section => {
        const sectionLi = document.createElement('li');
        sectionLi.textContent = section["kategoria"+(lang==="pl"?"":(lang==="en"?"_en":"_de"))] || section.kategoria;
        if (Array.isArray(section.kalkulatory)) {
          const kalkUl = document.createElement('ul');
          section.kalkulatory.forEach(kalk => {
            const kalkLi = document.createElement('li');
            kalkLi.innerHTML = ""; // reset
            if (kalk.link && kalk.link !== "#") {
              const kalkA = document.createElement('a');
              kalkA.href = kalk.link;
              kalkA.textContent = kalk["nazwa"+(lang==="pl"?"":(lang==="en"?"_en":"_de"))] || kalk.nazwa;
              kalkA.target = '_blank';
              kalkLi.appendChild(kalkA);
            } else {
              kalkLi.textContent = kalk["nazwa"+(lang==="pl"?"":(lang==="en"?"_en":"_de"))] || kalk.nazwa;
            }
            // Podsekcje
            if (Array.isArray(kalk.podsekcje) && kalk.podsekcje.length) {
              const podUl = document.createElement('ul');
              kalk.podsekcje.forEach(pod => {
                const podLi = document.createElement('li');
                if (pod.link && pod.link !== "#") {
                  const podA = document.createElement('a');
                  podA.href = pod.link;
                  podA.textContent = pod["nazwa"+(lang==="pl"?"":(lang==="en"?"_en":"_de"))] || pod.nazwa;
                  podA.target = '_blank';
                  podLi.appendChild(podA);
                } else {
                  podLi.textContent = pod["nazwa"+(lang==="pl"?"":(lang==="en"?"_en":"_de"))] || pod.nazwa;
                }
                podUl.appendChild(podLi);
              });
              kalkLi.appendChild(podUl);
            }
            kalkUl.appendChild(kalkLi);
          });
          sectionLi.appendChild(kalkUl);
        }
        tocRoot.appendChild(sectionLi);
      });
    }

    fetch('toc.json')
      .then(res => res.json())
      .then(data => {
        tocCache = data;
        setLanguage(document.getElementById('lang-select').value);
      })
      .catch(() => {
        document.getElementById('toc').innerHTML = '<li>Nie udało się pobrać listy sekcji. Sprawdź plik toc.json.</li>';
      });

    // Przełącznik języka
    document.getElementById('lang-select').onchange = function() {
      setLanguage(this.value);
    }
  </script>
</body>
</html>
