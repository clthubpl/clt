<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>CLT HUB – Powitalny</title>
  <meta name="viewport" content="width=1024">
  <style>
    /* ... Twój styl bez zmian ... */
  </style>
</head>
<body>
  <div id="lang-select-container">
    <select id="lang-select" aria-label="Wybierz język">
      <option value="pl">PL</option>
      <option value="en">ENG</option>
      <option value="de">GER</option>
    </select>
  </div>
  <h1>CLT HUB</h1>
  <main class="main-wrap">
    <section class="panel left-panel">
      <img src="logo CLTPL.png" alt="Logo CLT HUB" class="logo"/>
      <div class="headline" id="headline">CLT level up!</div>
      <div id="desc" class="desc"></div>
      <button class="entry-btn" id="entryBtn" onclick="window.location.href='HUBCLT.html?free=1&lang=pl#calc-mass'">
        Przejdź do CLT HUB
        <span>Jednorazowy dostęp. Każde kolejne wejście wymaga aktywacji płatnej sesji.</span>
        <span>Zapoznaj się z regulaminem poniżej.</span>
      </button>
      <div class="regulamin-panel" id="regulamin">
        <!-- ... Bez zmian ... -->
      </div>
    </section>
    <aside class="panel right-panel">
      <div class="toc-title" id="tocTitle">Kalkulatory i narzędzia</div>
      <div id="toc"></div>
    </aside>
  </main>
  <div class="footer" id="footer">
    <!-- ... Bez zmian ... -->
  </div>
  <script>
    // ... tłumaczenia bez zmian ...
    function applyLang(lang) {
      // ... tłumaczenia bez zmian ...
      document.getElementById('entryBtn').setAttribute("onclick", `window.location.href='HUBCLT.html?free=1&lang=${lang}#calc-mass'`);
      renderTOC(lang);
    }
    // ... obsługa języka bez zmian ...
    // UWAGA! ŚCIEŻKA DO toc.json JEST RELATYWNA (bo index.html jest w /docs)
    function renderTOC(lang) {
      fetch('toc.json')
        .then(res => res.json())
        .then(toc => {
          const tocDiv = document.getElementById('toc');
          tocDiv.innerHTML = "";
          toc.forEach(section => {
            const secTitle = document.createElement('div');
            secTitle.className = "toc-section-title";
            secTitle.textContent = section[`kategoria_${lang}`] || section.kategoria;
            tocDiv.appendChild(secTitle);
            const ul = document.createElement('ul');
            ul.className = "toc-list";
            section.kalkulatory.forEach(calc => {
              const li = document.createElement('li');
              const a = document.createElement('a');
              a.className = "toc-link";
              a.href = calc.link;
              a.target = "_blank";
              a.textContent = calc[`nazwa_${lang}`] || calc.nazwa;
              let opis = calc[`opis_${lang}`] || calc.opis;
              if (opis) a.title = opis;
              li.appendChild(a);
              if(opis) {
                const span = document.createElement('span');
                span.style.fontSize = "0.95em";
                span.style.color = "#444";
                span.style.fontWeight = "400";
                span.textContent = " – " + opis;
                li.appendChild(span);
              }
              ul.appendChild(li);
            });
            tocDiv.appendChild(ul);
          });
        })
        .catch(() => {
          document.getElementById('toc').innerHTML = '<div style="color:#b02c2c;">Nie można załadować listy kalkulatorów (toc.json).</div>';
        });
    }
  </script>
</body>
</html>
