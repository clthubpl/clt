<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CLT HUB</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: #e0e0e0;
      color: #333;
      min-height: 100vh;
    }
    .container {
      max-width: 860px;
      margin: 0 auto;
      padding: 0 1rem 3rem 1rem;
    }
    h1 {
      margin-top: 4mm;
      margin-bottom: 4mm;
      font-size: 2rem;
      color: #222;
      text-align: center;
      font-weight: 400;
      letter-spacing: 0.02em;
    }
    #lang-select-container {
      position: absolute;
      top: 1rem;
      right: 1rem;
      z-index: 1000;
    }
    #lang-select {
      font-size: 1rem;
      padding: 0.15em 0.6em;
      border-radius: 6px;
      border: 1px solid #999;
      background: #fff;
      color: #14281d;
    }
    .button-row {
      display: flex;
      justify-content: center;
      gap: 1.2rem;
      margin: 1.3em 0 1.3em 0;
    }
    .btn-main {
      font-size: 1.08em;
      font-weight: 400;
      letter-spacing: 0.01em;
      padding: 0.35em 1.2em;
      border: none;
      border-radius: 7px;
      background: #218838;
      color: #fff;
      cursor: pointer;
      transition: background 0.15s;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .btn-main .sub {
      font-size: 0.95em;
      color: #f4f4f4;
      margin-top: 2px;
      font-weight: 400;
      opacity: 0.92;
    }
    .btn-main .session-note {
      font-size: 0.92em;
      color: #ededed;
      margin-top: 1px;
      opacity: 0.75;
      font-weight: 400;
    }
    .btn-main:hover {
      background: #1e7e34;
    }
    /* LOGOWANIE ADMIN */
    #adminBtn {
      font-size: 1.08em;
      font-weight: 400;
      letter-spacing: 0.01em;
      padding: 0.35em 1.2em;
      border: none;
      border-radius: 7px;
      background: #1F3D2C !important;
      color: #14281D !important;
      cursor: pointer;
      transition: background 0.13s;
      margin-left: 1.5rem;
      margin-right: 1.5rem;
    }
    #adminBtn:hover {
      background: #25462e !important;
      color: #14281D !important;
    }
    #adminLogin {
      display: none;
      margin-top: 0.5rem;
      text-align: center;
    }
    #adminPass {
      margin-right: 0.5rem;
      font-size: 1.08em;
      border-radius: 5px;
      border: 1px solid #aaa;
      padding: 0.3em 0.8em;
    }
    #adminSubmit {
      font-size: 1.08em;
      padding: 0.3em 1.1em;
      background: #14281d;
      color: #fff;
      border: none;
      border-radius: 6px;
      margin-left: 0.7em;
      cursor: pointer;
    }
    #adminError {
      color: #ff4c4c;
      margin-left: 0.5em;
      font-size: 0.97em;
      display: none;
    }
    .logo {
      height: 38px;
      width: auto;
      border-radius: 7px;
      margin-left: 2rem;
      margin-right: 1rem;
      vertical-align: middle;
    }
    #toc {
      background:#fff;
      border-radius:8px;
      margin-top:2rem;
      padding:1rem;
      min-height: 120px;
    }
    /* Regulamin */
    #purchase-terms {
      max-width:600px;
      margin:1.5rem auto 0 auto;
      font-size:10pt;
      text-align:justify;
      border-radius:8px;
      background:#f4faf6;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      padding: 0.7em 1em 0.8em 1em;
    }
    #purchase-terms .title {
      font-size: 10pt;
      text-align: center;
      font-weight:600;
      margin-bottom: 0.3em;
    }
    @media (max-width: 700px) {
      .container { padding: 0 0.1rem 4rem 0.1rem; }
      .logo { height: 26px; }
      .btn-main, #adminBtn { font-size: 1em; }
      #toc { padding: 0.6em; }
    }
  </style>
</head>
<body>
  <div id="lang-select-container">
    <select id="lang-select" aria-label="Wybierz język">
      <option value="pl">PL</option>
      <option value="en">ENG</option>
      <option value="de">GER</option>
    </select>
  </div>
  <div class="container">
    <h1>CLT HUB</h1>
    <div class="button-row">
      <button class="btn-main" id="entryBtn">
        <span id="entry-text">Wejdź</span>
        <span class="sub" id="entry-terms">akceptuję warunki Regulaminu</span>
        <span class="session-note" id="session-note">(jedna sesja bezpłatnie)</span>
      </button>
      <button id="adminBtn">Logowanie admin</button>
      <!-- LOGO base64: zastąp 'logo.png' swoim kodem base64 lub ścieżką -->
      <img src="logo.png" alt="Logo" class="logo">
    </div>
    <div id="adminLogin">
      <input type="password" id="adminPass" placeholder="Hasło serwisowe" autocomplete="off"/>
      <button id="adminSubmit">Zaloguj</button>
      <span id="adminError"></span>
    </div>
    <div id="toc"></div>
    <div id="purchase-terms">
      <div class="title" id="regulamin-title">Regulamin</div>
      <div id="regulamin-content">
        Koszt usługi dostępu wyświetli się po akceptacji regulaminu z możliwością rezygnacji.<br>
        Usługa daje jednorazowy dostęp do kalkulatora po opłacie. Po odświeżeniu strony lub zmianie urządzenia trzeba zapłacić ponownie.<br>
        Usługa działa natychmiast po otrzymaniu płatności.<br>
        Usługa świadczona jest jako działalność nieewidencjonowana (art. 5, Dz.U. 2024 poz. 236).<br>
        Nie wystawiamy faktur ani paragonów. Potwierdzeniem jest płatność przez HotPay.<br>
        Po wykonaniu usługi nie ma prawa do odstąpienia (art. 38 ustawy o prawach konsumenta).<br>
        Reklamacje po płatności możliwe są tylko, jeśli usługa nie została wykonana. Zgłoszenia: <a href="mailto:cltplhub@gmail.com">cltplhub@gmail.com</a>.
      </div>
    </div>
  </div>
  <script>
    // Tłumaczenia przycisku, sesji, regulaminu
    const texts = {
      pl: {
        entry: "Wejdź",
        terms: "akceptuję warunki Regulaminu",
        session: "(jedna sesja bezpłatnie)",
        admin: "Logowanie admin",
        adminError: "Błędne hasło serwisowe",
        regulaminTitle: "Regulamin",
        regulamin: `Koszt usługi dostępu wyświetli się po akceptacji regulaminu z możliwością rezygnacji.<br>
        Usługa daje jednorazowy dostęp do kalkulatora po opłacie. Po odświeżeniu strony lub zmianie urządzenia trzeba zapłacić ponownie.<br>
        Usługa działa natychmiast po otrzymaniu płatności.<br>
        Usługa świadczona jest jako działalność nieewidencjonowana (art. 5, Dz.U. 2024 poz. 236).<br>
        Nie wystawiamy faktur ani paragonów. Potwierdzeniem jest płatność przez HotPay.<br>
        Po wykonaniu usługi nie ma prawa do odstąpienia (art. 38 ustawy o prawach konsumenta).<br>
        Reklamacje po płatności możliwe są tylko, jeśli usługa nie została wykonana. Zgłoszenia: <a href="mailto:cltplhub@gmail.com">cltplhub@gmail.com</a>.`
      },
      en: {
        entry: "Enter",
        terms: "I accept the Terms and Conditions",
        session: "(one free session)",
        admin: "Admin login",
        adminError: "Incorrect service password",
        regulaminTitle: "Terms and conditions",
        regulamin: `The cost of access will appear after you accept the terms. You can cancel at this stage.<br>
        The service gives one-time access to the calculator after payment. If you refresh the page or change device, you must pay again.<br>
        The service is available right after payment is received.<br>
        The service is provided as unregistered business activity (Art. 5, Dz.U. 2024 item 236).<br>
        No invoices or receipts are issued. Payment via HotPay is your proof.<br>
        After the service is delivered, you have no right to withdraw (Art. 38 of the Polish Consumer Rights Act).<br>
        Complaints after payment are only possible if the service was not delivered. Contact: <a href="mailto:cltplhub@gmail.com">cltplhub@gmail.com</a>.`
      },
      de: {
        entry: "Ich trete ein",
        terms: "Ich akzeptiere die Bedingungen des Regelwerks",
        session: "(eine Sitzung kostenlos)",
        admin: "Admin-Login",
        adminError: "Falsches Service-Passwort",
        regulaminTitle: "Regelwerk",
        regulamin: `Die Zugangskosten werden nach Annahme der Regeln angezeigt. Sie können dann abbrechen.<br>
        Der Service bietet nach der Zahlung einmaligen Zugang zum Rechner. Nach dem Aktualisieren der Seite oder Gerätewechsel ist eine neue Zahlung nötig.<br>
        Der Service steht sofort nach Zahlungseingang zur Verfügung.<br>
        Der Service wird als nicht eingetragene Tätigkeit erbracht (Art. 5, Dz.U. 2024 Pos. 236).<br>
        Es werden keine Rechnungen oder Kassenbelege ausgestellt. Die Zahlung über HotPay gilt als Nachweis.<br>
        Nach der Leistung gibt es kein Widerrufsrecht (Art. 38 polnisches Verbraucherschutzgesetz).<br>
        Reklamationen nach der Zahlung sind nur möglich, wenn der Service nicht erbracht wurde. Kontakt: <a href="mailto:cltplhub@gmail.com">cltplhub@gmail.com</a>.`
      }
    };

    // --- Spis treści z github ---
    async function loadTOC(lang='pl') {
      let url = 'https://raw.githubusercontent.com/clthubpl/kalkulator-szablon/main/docs/toc.json';
      try {
        let res = await fetch(url);
        let data = await res.json();
        let html = '';
        if (data && data[lang]) {
          Object.entries(data[lang]).forEach(([section, list]) => {
            html += `<div style="margin-bottom:1.1em"><b>${section}</b><ul style="margin:0.25em 0 0 1em;">`;
            list.forEach(item => html += `<li>${item}</li>`);
            html += '</ul></div>';
          });
        } else {
          html = `<span style="color:#d22">Brak spisu treści dla wybranego języka.</span>`;
        }
        document.getElementById('toc').innerHTML = html;
      } catch(e) {
        document.getElementById('toc').innerHTML = `<span style="color:#d22">Nie udało się załadować spisu treści.</span>`;
      }
    }
    // --- Admin login ---
    document.getElementById('adminBtn').onclick = function(){
      document.getElementById('adminLogin').style.display = 'block';
      document.getElementById('adminPass').focus();
    };
    document.getElementById('adminSubmit').onclick = function(){
      const lang = document.getElementById('lang-select').value;
      const pass = document.getElementById('adminPass').value.trim();
      if (pass === 'cltpladmin') {
        window.location.href = 'https://clthubpl.github.io/kalkulator-szablon/HUBCLT.html?admin=1&lang=' + lang;
      } else {
        document.getElementById('adminError').style.display = 'inline';
        document.getElementById('adminError').textContent = texts[lang].adminError;
        document.getElementById('adminPass').value = "";
        document.getElementById('adminPass').focus();
      }
    };
    document.getElementById('adminPass').addEventListener('keydown', function(e){
      if(e.key==='Enter') document.getElementById('adminSubmit').click();
    });

    // --- Entry button ---
    document.getElementById('entryBtn').onclick = function() {
      const lang = document.getElementById('lang-select').value;
      window.location.href = 'https://clthubpl.github.io/kalkulator-szablon/HUBCLT.html?free=1&lang=' + lang;
    };

    // --- Język ---
    function applyLang(lang) {
      document.getElementById('entry-text').textContent = texts[lang].entry;
      document.getElementById('entry-terms').textContent = texts[lang].terms;
      document.getElementById('session-note').textContent = texts[lang].session;
      document.getElementById('adminBtn').textContent = texts[lang].admin;
      document.getElementById('regulamin-title').textContent = texts[lang].regulaminTitle;
      document.getElementById('regulamin-content').innerHTML = texts[lang].regulamin;
      loadTOC(lang);
    }
    document.getElementById('lang-select').addEventListener('change', function() {
      applyLang(this.value);
    });

    window.addEventListener('DOMContentLoaded', () => {
      const saved = localStorage.getItem('clthub_lang') || 'pl';
      document.getElementById('lang-select').value = saved;
      applyLang(saved);
    });
  </script>
</body>
</html>
